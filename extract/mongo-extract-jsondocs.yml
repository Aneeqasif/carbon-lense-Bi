# yaml-language-server: $schema=https://raw.githubusercontent.com/meltano/meltano/main/src/meltano/schemas/meltano.schema.json
plugins:
  extractors:
  - name: tap-mongodb--jsondocs
    inherit_from: tap-mongodb
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/tap-mongodb.git
    config:
      database: carbonLens
      # directConnection=true is needed for Docker (bypasses replica set host discovery)
      mongodb_connection_string: mongodb://admin:mongoadd99@localhost:27017/carbonLens?replicaSet=rs0&authSource=admin&directConnection=true
      add_record_metadata: true
    metadata:
      # INCREMENTAL mode - syncs all data each run, reliable for scheduled batch loads
      '*':
        replication-method: INCREMENTAL
