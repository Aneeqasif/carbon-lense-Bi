# yaml-language-server: $schema=https://raw.githubusercontent.com/meltano/meltano/main/src/meltano/schemas/meltano.schema.json

plugins:
  extractors:
  - name: tap-mongodb--mapped
    inherit_from: tap-mongodb
    variant: z3z1ma
    pip_url: git+https://github.com/celine-eu/tap-mongodb.git@fix/no_module_singerlib
    config:
      mongo:
        host: localhost
        port: 27017
        directConnection: true
        readPreference: secondaryPreferred
        username: airbytemongo
        password: mongoairbyte11
        authSource: admin
        tls: false
      database_includes:
      - carbonLens
      # 'envelope' wraps entire document in a 'document' object field
      strategy: envelope

    # ═══════════════════════════════════════════════════════════════════════════
    # SELECT - Choose which streams to sync
    # Comment/uncomment as needed for your sync
    # ═══════════════════════════════════════════════════════════════════════════
    select:
      # --- Scope 1: Direct Emissions ---
    - carbonLens_stationarycombustions.*
    - carbonLens_mobilecombustions.*
    - carbonLens_fugitiveemissions.*
      # - "carbonLens_fire extinguishers.*"   # note: space in name
      # --- Scope 2: Indirect Energy ---
    - carbonLens_purchasedelectricities.*
    - carbonLens_renewableelectricities.*

      # --- Scope 3: FERA ---
    - carbonLens_ferastationaries.*
    - carbonLens_feramobiles.*
    - carbonLens_feraelectricities.*

      # # --- Scope 3: Business Travel ---
    - carbonLens_flighttravels.*
    - carbonLens_groundtravels.*
    - carbonLens_seatravels.*
    - carbonLens_accomodations.*

      # # --- Scope 3: Employee Commuting ---
    - carbonLens_employeecommutings.*

      # --- Scope 3: Transportation ---
    - carbonLens_upstreamtransportations.*
    - carbonLens_dtds.*

      # # --- Scope 3: Purchased Goods ---
    - carbonLens_rawmaterials.*
    - carbonLens_services.*
    - carbonLens_packagings.*
    - carbonLens_capitalgoods.*

      # # --- Scope 3: Waste ---
    - carbonLens_wastegenerations.*
    - carbonLens_endoflifetreatments.*

      # # --- Reference/Dimension Tables ---
    - carbonLens_companies.*
    - carbonLens_sites.*
    - carbonLens_users.*
    - carbonLens_fuels.*
    - carbonLens_customemissionfactors.*.*
    - carbonLens_units.*.*
    - carbonLens_vehicletypes.*.*
    - carbonLens_vehiclespecifications.*.*
