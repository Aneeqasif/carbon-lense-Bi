default_environment: dev
project_id: 019b7916-fe65-7a10-9076-09291e966f99
include_paths:
- ./extract/mongo-extract-jsondocs.yml
- ./extract/mongo-extract-mapped.yml
- ./load/duckdb-loader.yml
- ./load/csv-loader.yml
- ./transform/mongo-maper.yml
environments:
- name: dev
- name: prod

jobs:
- name: mongo-duckdb-mapped
  tasks:
  - tap-mongodb--mapped flatten-mongo target-duckdb--mapped
- name: mongo-duckdb-jsondocs
  tasks:
  - tap-mongodb--jsondocs target-duckdb--jsondocs
- name: mongo-csv--mapped
  tasks:
  - tap-mongodb--mapped flatten-mongo target-csv

schedules:
- name: hourly-load-mapped
  interval: '@hourly'
  job: mongo-duckdb-mapped
- name: hourly-load-direct
  interval: '@hourly'
  job: mongo-duckdb-jsondocs
plugins:
  utilities:
  - name: airflow
    variant: apache
    pip_url: git+https://github.com/meltano/airflow-ext.git@main apache-airflow==2.10.5 --constraint https://raw.githubusercontent.com/apache/airflow/constraints-2.10.5/constraints-no-providers-${MELTANO__PYTHON_VERSION}.txt
